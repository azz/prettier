machine:
  environment:
    PATH: "${PATH}:${HOME}/${CIRCLE_PROJECT_REPONAME}/node_modules/.bin"
  node:
    version: 6.10.3

test:
  override:
    - "true"

dependencies:
  override:
    - yarn --pure-lockfile
  cache_directories:
    - ~/.cache/yarn

deployment:
  website:
    branch: master
    commands:
      - git config --global user.email "prettier-bot@users.noreply.github.com"
      - git config --global user.name "Prettier Bot"
      - echo "machine github.com login prettier-bot password $GITHUB_TOKEN" > ~/.netrc
      - cd website && yarn --pure-lockfile && GIT_USER=prettier-bot yarn run publish-gh-pages
